<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/x-icon" href="Note2Flash_logo.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pricing - Note2Flash</title>
    <link rel="icon" type="image/png" href="Note2Flash_logo.png" />
    <link rel="stylesheet" href="styles.css" />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <!-- Firebase SDK -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-analytics.js";
      import { getAuth } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
      import { getFirestore } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";
    </script>
    <!-- Stripe -->
    <script src="https://js.stripe.com/v3/"></script>
    <!-- Other Dependencies -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <!-- Pricing Page Specific Styles -->
    <style>
      /* Ensure initial state - hide all prices on load, JS will show appropriate ones */
      .price {
        display: none !important;
      }

      /* Only show active prices */
      .price.active {
        display: block !important;
      }

      /* Ensure billing options are properly styled */
      .billing-option {
        transition: all 0.2s ease;
      }

      .billing-option.active {
        background-color: var(--primary-500) !important;
        color: white !important;
      }
    </style>
  </head>
  <body>
    <!-- Navigation will be loaded here -->
    <div id="nav-placeholder"></div>

    <div class="container">
      <!-- Pricing Hero Section -->
      <div class="pricing-hero">
        <h1>Turn any content into flashcards in seconds</h1>
        <div class="billing-toggle">
          <button class="billing-option active" data-billing="monthly">
            Monthly
          </button>
          <button class="billing-option" data-billing="yearly">Yearly</button>
          <span class="save-badge">Save up to $30 annually</span>
        </div>
      </div>

      <!-- Pricing Options -->
      <div class="pricing-options">
        <!-- Free Tier -->
        <div class="pricing-card">
          <h3>Free</h3>
          <div class="price-container">
            <div class="price monthly active">$0<span>/month</span></div>
            <div class="price yearly">$0<span>/month</span></div>
          </div>
          <p class="tier-description">Perfect for trying out Note2Flash!</p>
          <ul class="features">
            <li>3 deck generations per month</li>
            <li>Max 10 cards per deck</li>
            <li>1 card type (Term & Definition)</li>
            <li>Quiz Mode</li>
            <li>Advanced spaced repetition</li>
            <li>Text input, file upload & web content</li>
            <li>Limited progress tracking</li>
          </ul>
          <button class="btn btn-secondary" onclick="window.location.href='create-deck.html'">
            Get Started Free
          </button>
        </div>

        <!-- Basic Tier -->
        <div class="pricing-card">
          <div class="competitive-badge">üíé Student Favorite</div>
          <h3>Basic</h3>
          <div class="price-container">
            <div class="price monthly active">$7.99<span>/month</span></div>
            <div class="price yearly">
              $6.25<span>/month</span>
              <div class="billing-note">Billed annually at $74.99</div>
            </div>
          </div>
          <p class="tier-description">Better value than competitors!</p>
          <ul class="features">
            <li>25 deck generations per month</li>
            <li>Up to 25 cards per deck</li>
            <li>All card types (Term & Definition, Q&A, Cloze, Image Occlusion)</li>
            <li>Quiz Mode - (Enhanced)</li>
            <li>Detailed progress tracking</li>
            <li>‚ú® Explainer Assistant (20 credits/month)</li>
            <li>Text input, file upload & web content</li>
          </ul>
          <button class="btn btn-secondary" id="basicSubBtn">
            Start with Basic
          </button>
        </div>

        <!-- Premium Tier -->
        <div class="pricing-card featured">
          <div class="competitive-badge premium">üöÄ Power User Choice</div>
          <h3>Premium</h3>
          <div class="price-container">
            <div class="price monthly active">$14.99<span>/month</span></div>
            <div class="price yearly">
              $12.49<span>/month</span>
              <div class="billing-note">Billed annually at $149.99</div>
            </div>
          </div>
          <p class="tier-description">Master faster, remember longer, ace your exams!</p>
          <ul class="features">
            <li>100 deck generations per month</li>
            <li>Up to 100 cards per deck</li>
            <li>All card types (Term & Definition, Q&A, Cloze, Image Occlusion)</li>
            <li>Quiz Mode - (Adaptive AI)</li>
            <li>Advanced progress tracking</li>
            <li>‚ú® Explainer Assistant (100 credits/month)</li>
            <li>üìù Handwritten notes detection (OCR)</li>
            <li>Text input, file upload & web content</li>
          </ul>
          <button class="btn btn-primary" id="premiumSubBtn">
            Get Premium
          </button>
        </div>
      </div>

      <!-- FAQ Section -->
      <div class="faq-section">
        <h2>Frequently Asked Questions</h2>
        <div class="faq-grid">
          <div class="faq-item">
            <h3>What's the difference between Free, Basic, and Premium?</h3>
            <p>
              <strong>Free:</strong> 3 generations/month, 10 cards/deck, 2 saved decks - perfect for trying us out.<br>
              <strong>Basic ($7.99):</strong> 25 generations/month, 25 cards/deck, 25 saved decks, image occlusion, 100 explainer credits - great for individual students.<br>
              <strong>Premium ($14.99):</strong> 100 generations/month, 100 cards/deck, 100 saved decks, all features - perfect for serious learners.
            </p>
          </div>
          <div class="faq-item">
            <h3>What payment methods do you accept?</h3>
            <p>
              We accept all major credit cards (Visa, Mastercard, American
              Express) through our secure payment processor, Stripe.
            </p>
          </div>
          <div class="faq-item">
            <h3>Can I cancel my subscription?</h3>
            <p>
              Yes, you can cancel your subscription at any time. You'll
              continue to have access to your plan features until the end of your
              billing period.
            </p>
          </div>
          <div class="faq-item">
            <h3>What happens if I exceed my plan limits?</h3>
            <p>
              You'll be notified when you're close to your limits. You can
              upgrade to Premium at any time to get more generations and unlock all features, or purchase additional generations as needed.
            </p>
          </div>
          <div class="faq-item">
            <h3>How much do I save with annual billing?</h3>
            <p>
              Annual billing saves you money on both plans! Basic: $74.99/year (vs $95.88 monthly), Premium: $149.99/year (vs $179.88 monthly). Save $20-30 per year!
            </p>
          </div>
          <div class="faq-item">
            <h3>What is the Explainer Assistant?</h3>
            <p>
              Our breakthrough feature that goes beyond memorization! When you're stuck on a flashcard, click "Explain" to get AI-powered explanations that help you truly understand the concept. Ask follow-up questions, get examples, and build deep comprehension - not just rote memorization like traditional flashcard apps.
            </p>
          </div>
          <div class="faq-item">
            <h3>Can I upgrade from Basic to Premium anytime?</h3>
            <p>
              Absolutely! You can upgrade from Basic to Premium at any time. We'll prorate your billing so you only pay the difference for the remaining time in your billing cycle.
            </p>
          </div>
          <div class="faq-item">
            <h3>How do Explainer Credits work?</h3>
            <p>
              Credits give you flexible access to our breakthrough Explainer Assistant! Basic users get 20 credits that refill monthly, while Premium users get 100 credits monthly. Need more credits? You can purchase additional credit packs anytime at $0.10 per credit.
            </p>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="./config.js"></script>
    <script type="module" src="./app.js"></script>
    <script type="module">
      import { initializeNavigation } from "./nav-template.js";
      // Initialize navigation as soon as the DOM is ready
      document.addEventListener("DOMContentLoaded", initializeNavigation);
    </script>

    <script>
      // Pricing page specific functionality
      document.addEventListener("DOMContentLoaded", function () {
        // Billing toggle functionality - FIXED VERSION
        const billingOptions = document.querySelectorAll(".billing-option");
        const monthlyPrices = document.querySelectorAll(".price.monthly");
        const yearlyPrices = document.querySelectorAll(".price.yearly");

        // Set initial visibility state on page load
        function initializePriceVisibility() {
          // Hide all prices first
          monthlyPrices.forEach((price) => {
            price.style.display = "none";
            price.classList.remove("active");
          });
          yearlyPrices.forEach((price) => {
            price.style.display = "none";
            price.classList.remove("active");
          });

          // Show monthly by default (since monthly option has 'active' class in HTML)
          monthlyPrices.forEach((price) => {
            price.style.display = "block";
            price.classList.add("active");
          });

          // Set body attribute for CSS targeting
          document.body.setAttribute("data-billing", "monthly");
        }

        // Initialize price visibility immediately
        initializePriceVisibility();

        billingOptions.forEach((option) => {
          option.addEventListener("click", () => {
            console.log(
              "Billing option clicked:",
              option.getAttribute("data-billing")
            );

            // Remove active class from all options
            billingOptions.forEach((opt) => opt.classList.remove("active"));
            // Add active class to clicked option
            option.classList.add("active");

            const billing = option.getAttribute("data-billing");

            // Update body attribute for CSS targeting
            document.body.setAttribute("data-billing", billing);

            if (billing === "monthly") {
              monthlyPrices.forEach((price) => {
                price.style.display = "block";
                price.classList.add("active");
              });
              yearlyPrices.forEach((price) => {
                price.style.display = "none";
                price.classList.remove("active");
              });
            } else if (billing === "yearly") {
              monthlyPrices.forEach((price) => {
                price.style.display = "none";
                price.classList.remove("active");
              });
              yearlyPrices.forEach((price) => {
                price.style.display = "block";
                price.classList.add("active");
              });
            }
          });
        });

        // Basic subscription button
        document
          .getElementById("basicSubBtn")
          ?.addEventListener("click", async () => {
            // Trigger auth modal if not logged in, handle subscription logic in app.js
            const authModal = document.getElementById("authModal");
            if (
              authModal &&
              typeof window.handleBasicSubscription === "function"
            ) {
              window.handleBasicSubscription();
            } else {
              // Fallback - show auth modal
              if (authModal) {
                authModal.style.display = "block";
              }
            }
          });

        // Premium subscription button - simplified version
        // Full auth and subscription logic should be handled in app.js
        document
          .getElementById("premiumSubBtn")
          ?.addEventListener("click", async () => {
            // Trigger auth modal if not logged in, handle subscription logic in app.js
            const authModal = document.getElementById("authModal");
            if (
              authModal &&
              typeof window.handlePremiumSubscription === "function"
            ) {
              window.handlePremiumSubscription();
            } else {
              // Fallback - show auth modal
              if (authModal) {
                authModal.style.display = "block";
              }
            }
          });
      });
    </script>

    <script type="module">
      import { initializeFooter } from "./footer-template.js";
      // Initialize footer
      document.addEventListener("DOMContentLoaded", initializeFooter);
    </script>
  </body>
</html>
